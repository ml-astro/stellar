<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      background-color: black;
      margin: 0;
      padding: 0;
    }

h1, p {
  text-align: center;
}

    h1 {
      color: white;
    }

    p {
      color: white;
      font-size: 22px;
    }

    button {
      font-weight: bold;
      width: 13%;
      height: 3em;
      background-color: #CCC;
    }

    .system {
      width: 1000px;
      margin: 0 auto;
    }

    #buttonBlock {
      width: 100%;
      margin: 0 auto;
    }
  </style>

</head>

<body>
  <h1>Brightest Planets</h1>


  <p id="dateField"></p>
  <div id="buttonBlock">
    <button onclick="add(-100)">-100 D</button>
    <button onclick="add(-10)">-10 D</button>
    <button onclick="add(-1)">-1 D</button>
    <button onclick="add('now')">NOW</button>
    <button onclick="add(1)">+1 D</button>
    <button onclick="add(10)">+10 D</button>
    <button onclick="add(100)">+100 D</button>
  </div>
  <div class="system">
    <canvas id="myCanvas" width="1000" height="1000"></canvas>
  </div>
  <script>

    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');

    //initial system + time delay
    let date1 = new Date('2024-12-21');
    let date2 = new Date();
    var timeDelay = ((date2 - date1) / 86400000);
    generateSystem(timeDelay);


    function addDays(date, days) {
      var result = new Date(date);
      result.setDate(result.getDate() + days);
      return result;
    }

    //adding days and generating updated system
    function add(days) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (days == 'now') {
        date2 = new Date();
        timeDelay = ((date2 - date1) / 86400000);
        generateSystem(timeDelay);
      }
      else {
        timeDelay += days;
        generateSystem(timeDelay);
      }
    }

    function generateSystem(delay) {
      const centerX = 500;
      const centerY = 500;
      date2 = addDays(date1, delay);
      let month = parseInt(date2.getMonth()) + 1;
      dateString = date2.getDate() + '/' + month + '/' + date2.getFullYear();
      document.getElementById('dateField').textContent = dateString;

      ctx.fillStyle = 'black';
      ctx.fillRect(10, 10, canvas.height, canvas.height);

      //draw sun
      ctx.beginPath();
      ctx.arc(centerX, centerY, 10, 0, 2 * Math.PI);
      ctx.fillStyle = 'yellow';
      ctx.stroke();
      ctx.fill();


      const planets = [
        {
          distance: 57.9,
          offset: -161.72,
          step: 4.0923,
          color: "#AAA",
        },
        {
          distance: 108.2,
          offset: -34.6,
          step: 1.6021,
          color: "grey",
        },
        {
          distance: 149.0,
          offset: -90.0,
          step: 0.985609,
          color: "#44F",
        },
        {
          distance: 228.0,
          offset: -104.29,
          step: 0.52403,
          color: "#F33",
        },
        {
          distance: 778.5,
          offset: -77.44,
          step: 0.0831,
          color: "#A77",
        },
        {
          distance: 1432.0,
          offset: -349.437,
          step: 0.0335,
          color: "#C99",
        }
      ];


      planets.forEach(planet => {
        var zoom = 2;
        //draw orbit
        ctx.strokeStyle = 'white';
        ctx.beginPath();
        ctx.arc(centerX, centerY, planet.distance / zoom, 0, 2 * Math.PI);
        ctx.stroke();

        //calculate phase
        let phase = (planet.offset - planet.step * delay) * Math.PI / 180;
        //draw planet with translation applied
        ctx.save();
        ctx.translate(centerX, centerY);
        ctx.rotate(phase);
        ctx.beginPath();
        ctx.arc(planet.distance / zoom, 0, 6, 0, 2 * Math.PI);
        ctx.fillStyle = planet.color;
        ctx.fill();
        ctx.restore();
      });
    }


    //a
    //57.9, 108.2, 149.6, 228 778.5	1432.0	2867.0	4515.0	5906.4
    //P
    //87.9691	224.701	365.2564  686.98	---4331	10,747	30,589	59,800	90,560
    //angle on 22-12-99
    //222,4  164,7  270 352,5
    //1 day angle
    //4.0923  1.6021 0.985609 0.52403 0.0831
  </script>
</body>

</html>